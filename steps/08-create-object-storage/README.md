# Object Storage
Самый простой способ создания бакета в Object Storage — это использование UI в браузере, 
в этом случае вам нужно выполнить первую и последнюю секцию этого шага. 
Более сложный способ без участия UI в браузере, 
позволяющий автоматизировать вашу разработку — использование Terraform. 
Если вы хотите двигаться этим путем пропустите первую секцию и выполняйте до конца.

## Использование UI

В консоли управления в вашем рабочем каталоге выберите сервис `Object Storage`. Нажмите кнопку `Создать бакет`.
На странице создания бакета:
* Введите имя бакета, оно должно быть уникальный для всего Yandex Cloud пусть оно включает имя вашего пользователя и будет `bucket-for-bot-sls350`.
* При необходимости ограничьте максимальный размер бакета, мы установим значение в 1 ГБ.
* Выберите тип доступа, в нашем уроке установим значения в  `Публичный` во всех случаях.
* Выберите класс хранилища, по умолчанию используется `Стандартное`.

Нажмите кнопку `Создать бакет` для завершения операции. 
Далее вы всегда сможете поменять класс хранилища, его размер и настройки доступа.
После спешного создания 

## Внесение правок в спецификацию Terraform

Альтернативный путь создания бакета позволяет избежать использования UI. Для этого потребуется использовать утилиту terraform.

Прежде всего необходимо получить OAuth-токен для работы с Yandex Cloud, 
это можно осуществить с помощью запроса к сервису Яндекс.OAuth.  
Подробнее прочитать можно в [документации](https://cloud.yandex.ru/docs/iam/concepts/authorization/oauth-token).
Запомните OAuth-токен в качестве переменной `OAuth`, но никому не передавайте. 
Также вам потребуется значение переменных: 
идентификатор облака — `CLOUD_ID` и идентификатор каталога `FOLDER_ID`.

Также на предыдущем шаге вы создали сервисный аккаунт и получили для него ключ доступа.
Нам потребуется идентификатор ключа доступа `ACCESS_KEY` и `secret` — это секретный ключ `SECRET_KEY`.

В файл `main.tf` внесем все собранные переменные. 
Важно `BUCKET-ID` указывает на создаваемый bucket в Object Storage куда будем загружать файлы, 
допустим переменная будет равна `bucket-for-bot-sls350`. 
Сохраним все значения. Чтобы переменные были перед глазами:

    echo $YC_IAM_TOKEN
    echo $YC_FOLDER_ID
    echo $YC_CLOUD_ID
    echo $AWS_ACCESS_KEY_ID
    echo $AWS_SECRET_ACCESS_KEY

## Применение Terraform

После внесения правок, находясь в каталоге с файлом  `main.tf` 
последовательно выполните следующие команды:

    cd ..
    cd 08-create-object-storage/

    terraform init
    terraform plan
    terraform apply

Удачное выполнение команд приведет к созданию бакета `bucket-for-bot-sls350` 
в сервисе Object Storage в вашем рабочем каталоге. 

## Сохранение переменных

Не забудем сохранить название бакета в переменную `BUCKET_NAME`, 
перед выполнением команд внесите свое название бакета:

    echo "export BUCKET_NAME=<BUCKET_NAME>" >> ~/.bashrc && . ~/.bashrc
    echo $BUCKET_NAME

    yc lockbox secret add-version --id $LOCKBOX_SECRET_ID \
    --payload "[{'key': 'BUCKET_NAME', 'text_value': '$BUCKET_NAME'}]"

## Видео

https://youtu.be/VPEs_pbLqg8

# [Следующий этап >>>](../09-function-for-bucket/README.md)